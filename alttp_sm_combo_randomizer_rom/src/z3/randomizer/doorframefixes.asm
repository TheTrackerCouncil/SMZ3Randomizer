;================================================================================
; Door Frame Fixes
;================================================================================

;--------------------------------------------------------------------------------
; StoreLastOverworldDoorID
;--------------------------------------------------------------------------------
StoreLastOverworldDoorID:
	TXA : INC
	STA $7F5099
	LDA $1BBB73, X : STA $010E
RTL
;--------------------------------------------------------------------------------

;--------------------------------------------------------------------------------
; CacheDoorFrameData
;--------------------------------------------------------------------------------
CacheDoorFrameData:
	LDA $7F5099 : BEQ .originalBehaviour
	DEC : ASL : TAX
	LDA EntranceDoorFrameTable, X : STA $0696
	LDA EntranceAltDoorFrameTable, X : STA $0698
	BRA .done
	.originalBehaviour
		LDA $D724, X : STA $0696
		STZ $0698
	.done
RTL
;--------------------------------------------------------------------------------

;--------------------------------------------------------------------------------
; WalkDownIntoTavern
;--------------------------------------------------------------------------------
WalkDownIntoTavern:
	LDA $7F5099
	; tavern door has index 0x42 (saved off value is incremented by one)
	CMP #$43
RTL
;--------------------------------------------------------------------------------
